<div class="container">
  <div *ngIf="!lyricAddedConfirmation">
    <form (submit)='addLyric()' #form="ngForm" autocomplete="off">
      <p>Itilize fomilè sa pou ajoute pawol mizik.
        <a href="#" data-toggle="popover" title="Popover Header" data-content="Some content inside the popover">Klike pou detay</a>
      </p>
      <!-- Title -->
      <div class="form-group">
        <label for="title">Tit mizik la:</label>
        <input type="text"
              name="title"
              id="title"
              [(ngModel)]="lyric.title"
              (change)="lyricAvailability()"
              required
              class="form-control input-lg"
              [ngClass]="errorColorTitle"
              placeholder="Kijan mizik la rele?">
      </div>
      <!-- Singer -->
      <div class="form-group">
        <label for="singer">Chantè mizik la:</label>
        <input type="text"
              name="singer"
              id="singer"
              [(ngModel)]="lyric.singerOnPage"
              (input)="checkForSingerName()"
              (keyup)="checkForSingerName()"
              [ngClass]="errorColorSinger"
              required
              class="form-control input-lg" 
              placeholder="Kiyès ki chante mizik sa?">

              <div *ngIf="singerToAdd != null" class="alert singerAvailable">
                <p>Chwazi &#8595;</p>
                <button (click)="setSingerName(singerExist._id, singerExist.name)"
                        *ngFor="let singerExist of singerToAdd"
                        class="btn btn-success singerToAdd">{{ singerExist.name }}</button>
                </div>
        <div *ngIf="noSingerToAdd" class="alert noSingerToAdd">
          <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
          <button type="button" (click)="createNewSinger(lyric.singerOnPage, 0)" class="btn btn-success">Wi</button>
          <button type="button" (click)="cancelNewSingerCreation()" class="btn btn-danger">Non</button>
        </div>
        <div *ngIf="singerCreateSuccessfully" class="alert alert-success">
          <p>Nou ajoute atis sa nan lis atis nou!</p>
        </div>
      </div>
      <!-- Lyrics -->
      <div class="form-group">
        <label for="lyrics">Pawol mizik la:</label>
        <textarea name="lyrics"
              required
              id="lyrics"
              rows="10"
              [(ngModel)]="lyric.lyrics"
              (change)="lyricAvailability()"
              [ngClass]="errorColorLyric"
              class="form-control"
              placeholder="Mete pawol mizik yo la"></textarea>
      </div>
      <!-- Add views -->
      <div class="form-group">
        <label for="views">Old Views:</label>
        <input type="number" name="views" class="form-control" [(ngModel)]="lyric.views">
      </div>
      <!-- Add Url -->
      <div class="form-group">
        <label for="url">Old Url:</label>
        <input type="text" name="url" class="form-control" [(ngModel)]="lyric.url">
      </div>
      <!-- If featurers -->
      <div class="form-group">
        <label for="featuring">Eske gen lot atis ki chante sou mizik sa (Featuring)?</label>
        <div class="radion">
          <label class="radio-inline"><input (click)="featurerAvailable('no')" selected type="radio" name="songWithFeaturing">Non</label>
          <label class="radio-inline"><input (click)="featurerAvailable('yes')" type="radio" name="songWithFeaturing">Wi</label>
        </div>
      </div>
      <!-- Featurers name -->
      <div *ngIf="featurer1" class="form-group">
        <label for="featurer1">Lot atis ki sou mizik la:</label>
        <input type="text"
              name="featurer1"
              id="featurer1"
              [(ngModel)]="featuring.one"
              (input)="checkForFeaturersName(featuring.one, 1)"
              class="form-control input-lg"
              placeholder="Non Atis ki featuring sou mizik sa?">

          <div *ngIf="featurerOneToAdd != null" class="alert singerAvailable">
            <p>Chwazi &#8595;</p>
            <button (click)="setFeaturerName(featuring.one, featurerOneExist._id, featurerOneExist.name, 1)"
                *ngFor="let featurerOneExist of featurerOneToAdd"
                class="btn btn-success singerToAdd">{{ featurerOneExist.name }}</button>
          </div>
          <div *ngIf="nofeaturerOneToAdd" class="alert noSingerToAdd">
            <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
            <button type="button" (click)="createNewSinger(featuring.one, 1)" class="btn btn-success">Wi</button>
            <button type="button" (click)="cancelNewSingerCreation(f1)" class="btn btn-danger">Non</button>
          </div>
          <div *ngIf="featurerOneCreateSuccessfully" class="alert alert-success">
            <p>Nou ajoute atis sa nan lis atis nou!</p>
          </div>
        <div *ngIf="!featurer2 && featurer.one != null"><a (click)="featurerAvailable('2')">+Ajoute yon lot atis anko</a></div>
      </div>
      <div *ngIf="featurer2" class="form-group">
        <label for="featurer2">Lot atis ki sou mizik la:</label>
        <input type="text"
              name="featurer2"
              id="featurer2"
              [(ngModel)]="featuring.two"
              (input)="checkForFeaturersName(featuring.two, 2)"
              class="form-control input-lg"
              placeholder="Non Atis ki featuring sou mizik sa?">
              
              <div *ngIf="featurerTwoToAdd != null" class="alert singerAvailable">
                  <p>Chwazi &#8595;</p>
                  <button (click)="setFeaturerName(featuring.two, featurerTwoExist._id, featurerTwoExist.name, 2)"
                      *ngFor="let featurerTwoExist of featurerTwoToAdd"
                      class="btn btn-success singerToAdd">{{ featurerTwoExist.name }}</button>
                </div>
                <div *ngIf="nofeaturerTwoToAdd" class="alert noSingerToAdd">
                  <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
                  <button type="button" (click)="createNewSinger(featuring.two, 2)" class="btn btn-success">Wi</button>
                  <button type="button" (click)="cancelNewSingerCreation(f2)" class="btn btn-danger">Non</button>
                </div>
                <div *ngIf="featurerTwoCreateSuccessfully" class="alert alert-success">
                  <p>Nou ajoute atis sa nan lis atis nou!</p>
                </div>
        <div *ngIf="!featurer3 && featurer.two != null"><a (click)="featurerAvailable('3')">+Ajoute yon lot atis anko</a></div>
      </div>
      <div *ngIf="featurer3" class="form-group">
        <label for="featurer3">Lot atis ki sou mizik la:</label>
        <input type="text"
              name="featurer3"
              id="featurer3"
              [(ngModel)]="featuring.three"
              (input)="checkForFeaturersName(featuring.three, 3)"
              class="form-control input-lg"
              placeholder="Non Atis ki featuring sou mizik sa?">

              <div *ngIf="featurerThreeToAdd != null" class="alert singerAvailable">
                  <p>Chwazi &#8595;</p>
                  <button (click)="setFeaturerName(featuring.three, featurerThreeExist._id, featurerThreeExist.name, 3)"
                      *ngFor="let featurerThreeExist of featurerThreeToAdd"
                      class="btn btn-success singerToAdd">{{ featurerThreeExist.name }}</button>
                </div>
                <div *ngIf="nofeaturerThreeToAdd" class="alert noSingerToAdd">
                  <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
                  <button type="button" (click)="createNewSinger(featuring.three, 3)" class="btn btn-success">Wi</button>
                  <button type="button" (click)="cancelNewSingerCreation(f3)" class="btn btn-danger">Non</button>
                </div>
                <div *ngIf="featurerThreeCreateSuccessfully" class="alert alert-success">
                  <p>Nou ajoute atis sa nan lis atis nou!</p>
                </div>
        <div *ngIf="!featurer4 && featurer.three != null"><a (click)="featurerAvailable('4')">+Ajoute yon lot atis anko</a></div>
      </div>
      <div *ngIf="featurer4" class="form-group">
        <label for="featurer4">Lot atis ki sou mizik la:</label>
        <input type="text"
              name="featurer4"
              id="featurer4"
              [(ngModel)]="featuring.four"
              (input)="checkForFeaturersName(featuring.four, 4)"
              class="form-control input-lg"
              placeholder="Non Atis ki featuring sou mizik sa?">

              <div *ngIf="featurerFourToAdd != null" class="alert singerAvailable">
                  <p>Chwazi &#8595;</p>
                  <button (click)="setFeaturerName(featuring.four, featurerFourExist._id, featurerFourExist.name, 4)"
                      *ngFor="let featurerFourExist of featurerFourToAdd"
                      class="btn btn-success singerToAdd">{{ featurerFourExist.name }}</button>
                </div>
                <div *ngIf="nofeaturerFourToAdd" class="alert noSingerToAdd">
                  <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
                  <button type="button" (click)="createNewSinger(featuring.four, 4)" class="btn btn-success">Wi</button>
                  <button type="button" (click)="cancelNewSingerCreation(f4)" class="btn btn-danger">Non</button>
                </div>
                <div *ngIf="featurerFourCreateSuccessfully" class="alert alert-success">
                  <p>Nou ajoute atis sa nan lis atis nou!</p>
                </div>
        <div *ngIf="!featurer5 && featurer.four != null"><a (click)="featurerAvailable('5')">+Ajoute yon lot atis anko</a></div>
      </div>
      <div *ngIf="featurer5" class="form-group">
        <label for="featurer5">Lot atis ki sou mizik la:</label>
        <input type="text"
              name="featurer5"
              id="featurer5"
              [(ngModel)]="featuring.five"
              (input)="checkForFeaturersName(featuring.five, 5)"
              class="form-control input-lg"
              placeholder="Non Atis ki featuring sou mizik sa?">

              <div *ngIf="featurerFiveToAdd != null" class="alert singerAvailable">
                  <p>Chwazi &#8595;</p>
                  <button (click)="setFeaturerName(featuring.five, featurerFiveExist._id, featurerFiveExist.name, 5)"
                      *ngFor="let featurerFiveExist of featurerFiveToAdd"
                      class="btn btn-success singerToAdd">{{ featurerFiveExist.name }}</button>
                </div>
                <div *ngIf="nofeaturerFiveToAdd" class="alert noSingerToAdd">
                  <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
                  <button type="button" (click)="createNewSinger(featuring.five, 5)" class="btn btn-success">Wi</button>
                  <button type="button" (click)="cancelNewSingerCreation(f5)" class="btn btn-danger">Non</button>
                </div>
                <div *ngIf="featurerFiveCreateSuccessfully" class="alert alert-success">
                  <p>Nou ajoute atis sa nan lis atis nou!</p>
                </div>
        <div *ngIf="!featurer6 && featurer.five != null"><a (click)="featurerAvailable('6')">+Ajoute yon lot atis anko</a></div>
      </div>
      <div *ngIf="featurer6" class="form-group">
          <label for="featurer6">Lot atis ki sou mizik la:</label>
        <input type="text"
              name="featurer6"
              id="featurer6"
              [(ngModel)]="featuring.six"
              (input)="checkForFeaturersName(featuring.six, 6)"
              class="form-control input-lg"
              placeholder="Non Atis ki featuring sou mizik sa?">

              <div *ngIf="featurerSixToAdd != null" class="alert singerAvailable">
                  <p>Chwazi &#8696;</p>
                  <button (click)="setFeaturerName(featuring.six, featurerSixExist._id, featurerSixExist.name, 6)"
                      *ngFor="let featurerSixExist of featurerSixToAdd"
                      class="btn btn-success singerToAdd">{{ featurerSixExist.name }}</button>
                </div>
                <div *ngIf="nofeaturerSixToAdd" class="alert noSingerToAdd">
                  <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
                  <button type="button" (click)="createNewSinger(featuring.six, 6)" class="btn btn-success">Wi</button>
                  <button type="button" (click)="cancelNewSingerCreation(f6)" class="btn btn-danger">Non</button>
                </div>
                <div *ngIf="featurerSixCreateSuccessfully" class="alert alert-success">
                  <p>Nou ajoute atis sa nan lis atis nou!</p>
                </div>
        <div *ngIf="!featurer7 && featurer.six != null"><a (click)="featurerAvailable('7')">+Ajoute yon lot atis anko</a></div>
      </div>
      <div *ngIf="featurer7" class="form-group">
          <label for="featurer7">Lot atis ki sou mizik la:</label>
        <input type="text"
              name="featurer7"
              id="featurer7"
              [(ngModel)]="featuring.seven"
              (input)="checkForFeaturersName(featuring.seven, 7)"
              class="form-control input-lg"
              placeholder="Non Atis ki featuring sou mizik sa?">

              <div *ngIf="featurerSevenToAdd != null" class="alert singerAvailable">
                  <p>Chwazi &#8797;</p>
                  <button (click)="setFeaturerName(featuring.seven, featurerSevenExist._id, featurerSevenExist.name, 7)"
                      *ngFor="let featurerSevenExist of featurerSevenToAdd"
                      class="btn btn-success singerToAdd">{{ featurerSevenExist.name }}</button>
                </div>
                <div *ngIf="nofeaturerSevenToAdd" class="alert noSingerToAdd">
                  <p>Non Atis sa pako sou sit la. Eske ou vle ajoute l?</p>
                  <button type="button" (click)="createNewSinger(featuring.seven, 7)" class="btn btn-success">Wi</button>
                  <button type="button" (click)="cancelNewSingerCreation(f7)" class="btn btn-danger">Non</button>
                </div>
                <div *ngIf="featurerSevenCreateSuccessfully" class="alert alert-success">
                  <p>Nou ajoute atis sa nan lis atis nou!</p>
                </div>
      </div>
      <!-- Released Date -->
      <div class="form-group">
        <label for="realeasedDate">Kilè mizik sa soti?:</label>
        <input type="date"
              name="realeasedDate"
              id="realeasedDate"
              [(ngModel)]="lyric.released_date"
              class="form-control input-lg">
      </div>
      <!-- Album -->
      <div *ngIf="singerAlbumList.length > 0" class="form-group">
        <label for="album">Albòm mizik sa:</label>
        <select name="album" id="album" class="form-control input-lg" [(ngModel)]="lyric.album">
            <option *ngFor="let album of singerAlbumList" value="{{album._id}}">{{ album.name }}</option>
          </select>
      </div>
      <!-- Category -->
      <div class="form-group">
        <label for="category">Kategori mizik la:</label>
        <select name="category" class="form-control input-lg" [(ngModel)]="lyric.category" id="category">
          <option value="Rap">Rap</option>
          <option value="Konpa">Konpa</option>
          <option value="Reggea">Reggea</option>
          <option value="Levanjil">Levanjil</option>
          <option value="Rasin">Rasin</option>
          <option value="Kanaval">Kanaval</option>
        </select>
      </div>
      <!-- Audio Link -->
      <div class="form-group">
        <label for="soundcloud">Lyen pou koute mizik sa sou SOUNDCLOUD:</label>
        <input type="url"
              name="soundcloud"
              id="soundcloud"
              [(ngModel)]="lyric.soundcloud"
              class="form-control input-lg"
              placeholder="Egzanp: https://soundcloud.com/rapprovens/zomor-life-goes-on">
      </div>
      <!-- Video Link -->
      <div class="form-group">
        <label for="youtube">Lyen videyo mizik sa sou YOUTUBE</label>
        <input type="url"
              name="youtube"
              id="youtube"
              [(ngModel)]="lyric.youtube"
              class="form-control input-lg"
              placeholder="Egzanp: https://www.youtube.com/embed/Z-KN6qsPt6M">
        <p><strong>Nòt enpòtan: Asire ou gen lyen video youtube la gen menm fòma ak egzanp ki nan espas pou mete lyen an. Espesyalman lyen an sipoze genyen mo "embed" la ladan l.</strong></p>
      </div>
      <button type="submit" [disabled]="form.invalid" class="btn btn-primary btn-block signupEntries">Ajoute Pawol Mizik sa</button>
    </form>

    <div *ngIf="existingLyricTitles.length > 0" class="addingLyricsValidation">
        <h2>Mizik sou sit la ki gen non tankou sa:</h2>
        <ul>
          <li *ngFor="let existingLyric of existingLyricTitles">
            <span *ngIf="existingLyric.score > 0.5">
              <a [routerLink]="['/lyrics/', existingLyric.url]">{{existingLyric.title}} - {{existingLyric.singer.name}}
                <span *ngIf="existingLyric.featuring != null">
                  <span>feat. {{existingLyric.featuring.one.name}}</span>
                  <span *ngIf="existingLyric.featuring.two != null">, {{ existingLyric.featuring.two.name }}</span>
                  <span *ngIf="existingLyric.featuring.three != null">, {{ existingLyric.featuring.three.name }}</span>
                  <span *ngIf="existingLyric.featuring.four != null">, {{ existingLyric.featuring.four.name }}</span>
                  <span *ngIf="existingLyric.featuring.five != null">, {{ existingLyric.featuring.five.name }}</span>
                  <span *ngIf="existingLyric.featuring.six != null">, {{ existingLyric.featuring.six.name }}</span>
                  <span *ngIf="existingLyric.featuring.seven != null">, {{ existingLyric.featuring.seven.name }}</span>
                </span>
              </a>
            </span>
          </li>
        </ul>
    </div>

    <div *ngIf="lyric.title == null" class="howToAddLyricVideo">
      <h2>Kijan pou w ajoute yon pawol?</h2>
      <iframe width="80%" height="300" src="https://www.youtube.com/embed/sxL4Fz1Ak7M" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
    </div>
  </div>

  <div *ngIf="lyricAddedConfirmation">
    <div class="jumbotron">
      <h1>Mèsi paske ou ajoute pawol mizik sa.</h1>
      <button (click)="nextLyric(form)" class="btn btn-default">Ajoute pawol pou yon lot mizik</button>
    </div>
  </div>
  
</div>


<script>
  $(document).ready(function(){
    $('[data-toggle="popover"]').popover();   
  });
</script>